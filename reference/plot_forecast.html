<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot a forecast — plot_forecast • casteval</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot a forecast — plot_forecast"><meta name="description" content="Plot a forecast, along with corresponding observations, quantile intervals, etc."><meta property="og:description" content="Plot a forecast, along with corresponding observations, quantile intervals, etc."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">casteval</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/casteval.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/scoring.html">Scoring forecasts</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot a forecast</h1>

      <div class="d-none name"><code>plot_forecast.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plot a forecast, along with corresponding observations, quantile intervals, etc.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_forecast</span><span class="op">(</span></span>
<span>  <span class="va">fcst</span>,</span>
<span>  obs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quant_intervals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  invert_scale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  score <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fcst">fcst<a class="anchor" aria-label="anchor" href="#arg-fcst"></a></dt>
<dd><p>A forecast object (see output of <code><a href="create_forecast.html">create_forecast()</a></code>).</p></dd>


<dt id="arg-obs">obs<a class="anchor" aria-label="anchor" href="#arg-obs"></a></dt>
<dd><p>(Optional) An observations data frame.
If provided, they will be overlaid over the forecast as points.</p></dd>


<dt id="arg-quant-intervals">quant_intervals<a class="anchor" aria-label="anchor" href="#arg-quant-intervals"></a></dt>
<dd><p>(Optional) A list of pairs of numbers between 0 and 100,
or a single pair of numbers between 0 and 100.
If provided, the score for each corresponding pairs of quantiles will be calculated.
If not provided, it will default to every symmetrical pair of quantiles that can be found in <code>fcst</code>,
ordered from widest to narrowest (e.x. the 25% and 75% quantiles are symmetrical).</p>
<p>The corresponding quantile intervals, if present, will be displayed in the resulting plot.</p>
<p><code>quant_intervals</code> can be set to <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> in order to display no quantile intervals.</p></dd>


<dt id="arg-invert-scale">invert_scale<a class="anchor" aria-label="anchor" href="#arg-invert-scale"></a></dt>
<dd><p>(Optional) (Optional) a boolean.
If <code>TRUE</code>, the color scale for scoring will be inverted.
This is useful for scores where smaller values are better, e.x. CRPS.</p></dd>


<dt id="arg-score">score<a class="anchor" aria-label="anchor" href="#arg-score"></a></dt>
<dd><p>(Optional) A scoring function.
The function will be used to score <code>fcst</code> against <code>obs</code>.
A scoring function should accept a forecast object, an observations data frame, as well as a <code>summarize</code> argument.
See <code><a href="accuracy.html">?accuracy</a></code>, <code><a href="log_score.html">?log_score</a></code> for examples.
See <code><a href="../articles/casteval.html">vignette(topic='casteval', package='casteval')</a></code> for details.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional parameters to be passed to <code>score</code>.
Note that <code>summarize</code> should not be one of them,
since <code>casteval</code> already passes that to <code>score</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggplot object</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fc</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_forecast.html">create_forecast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  time<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span></span>
<span class="r-in"><span>  vals<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">6</span>,<span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>time<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, val_obs<span class="op">=</span><span class="fl">5</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot forecast</span></span></span>
<span class="r-in"><span><span class="fu">plot_forecast</span><span class="op">(</span><span class="va">fc</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot_forecast-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot forecast and observations</span></span></span>
<span class="r-in"><span><span class="fu">plot_forecast</span><span class="op">(</span><span class="va">fc</span>, <span class="va">obs</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot_forecast-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot forecast and quantile interval(s)</span></span></span>
<span class="r-in"><span><span class="fu">plot_forecast</span><span class="op">(</span><span class="va">fc</span>, quant_intervals<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="fl">75</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.5</span>,<span class="fl">97.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot_forecast-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># highlight the observations inside the quantile interval</span></span></span>
<span class="r-in"><span><span class="fu">plot_forecast</span><span class="op">(</span><span class="va">fc</span>, <span class="va">obs</span>, quant_intervals<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.5</span>,<span class="fl">97.5</span><span class="op">)</span>, score<span class="op">=</span><span class="fu"><a href="make_accuracy.html">make_accuracy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.5</span>,<span class="fl">97.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Scoring accuracy using quantile pairs c(2.5, 97.5)</span>
<span class="r-plt img"><img src="plot_forecast-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show the log score of each observation</span></span></span>
<span class="r-in"><span><span class="fu">plot_forecast</span><span class="op">(</span><span class="va">fc</span>, <span class="va">obs</span>, score<span class="op">=</span><span class="va">log_score</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot_forecast-5.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Yu, Irena Papst.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

